# RÃ©duction de l'impact Ã©cologique du service numÃ©rique d'un site de lecture en ligne

## Choix du Sujet
Notre utilisation personnelle de services de lecture et d'Ã©criture en ligne constitue une valeur moyenne horaire de 20h/semaine. Ce qui est une grosse partie de notre consommation en ligne, non pas pour la consommation Ã©lectrique mais la durÃ©e d'utilisation. Nous avons constatÃ© :
- Une augmentation significative d'utilisation de services de lecture en ligne durant la pÃ©riode COVID de lecteurs(ices) en ligne.
- 15 millions d'oeuvres Ã©crites sur le site Archive of our Own


## UtilitÃ© Sociale
- Pour la culture -> les livres alimentent depuis trÃ¨s longtemps la culture, les meurs et la morale
- Pour la connaissance -> depuis longtemps les livres permettent de partager la connaissance et d'apprendre, d'Ã©tudier divers sujets
- Pour le loisir et le bien-Ãªtre -> les livres peuvent reprÃ©senter une Ã©chappatoire Ã  la dÃ©pression ou Ã  un mal-Ãªtre quelconque, donner des conseils de vie, permettre de relativiser sur notre existence, ou aider avec la confiance en soi
- Pour l'expression de soi et des autres -> les livres permettent de s'exprimer, de dÃ©couvrir diffÃ©rentes opinions, d'en discuter avec les autres, d'alimenter des dÃ©bats
- Pour la libertÃ© d'expression -> pour notre chÃ¨re constitution
- Pour le climat -> rÃ©duit l'utilisation de papier, et utilise peut de consommation Ã©lÃ©ctrique comparer Ã  d'autres divertissements

## Effets de la numÃ©risation
### DÃ©mocratie technique
1. Pour les auteurs
- Communautaire
- Ã‰vite l'Ã©dition chÃ¨re (contourne les maisons d'Ã©ditions)
- Avoir des avis rapidement pour les jeunes auteurs
- DÃ©mocratisation de l'Ã©criture -> ouverte Ã  plus de monde
2. Pour les lecteurs
- Permettre d'avoir plus de choix
- DÃ©couvrir plus facilement de nouveaux auteurs grÃ¢ce aux avis
- Pouvoir trier, filtrer et donc trouver ce qui nous intÃ©resse plus facilement

### Substitutions:
- Substituer le papier par le digital
- Manuscripts papier vers le digital, beaucoup moins de gaspillage de papier pour opÃ©rer des changements dans les textes mais Ã  voir si c'est rentable d'un point de vue Ã©cologique
- Permet d'Ã©viter d'imprimer des manuscripts vers les maisons d'Ã©ditions puis qu'on poste directement en ligne

### Effet rebond:
- Avoir une copie papier et une copie numÃ©rique
- Plus facile de lire des livres -> donc on en consomme plus

## ScÃ©narios dâ€™usage et dâ€™impacts

Nous faisons lâ€™hypothÃ¨se quâ€™une personne venant sur Wattpad est lÃ  pour dÃ©couvrir, chercher, lire ou Ã©crire des histoires. Pour le temps limitÃ© de la requÃªte, nous estimerons que lâ€™utilisateur ne lis ou Ã©crit quâ€™un seul chapitre, en moins de quelques minutes (ce nâ€™est Ã©videment pas un reflets de la rÃ©alitÃ©).

Nous ferons aussi la distinction entre la recherche et la lecture de livre dans deux sÃ©narios distincts ainsi quâ€™un seul scÃ©nario pour lâ€™Ã©criture et un pour l'aspect communautaire avec lâ€™Ã©crit dâ€™un commentaire.

### ScÃ©nario 1 : Lire une histoire mise en favorite
1. Le lecteur se connecte
2. Le lecteur va sur son profil
3. Le lecteur lit la nouvelle publication dâ€™une histoire
### ScÃ©nario 2 : Chercher une histoire avec diffÃ©rents filtre
1. Le lecteur va sur la page dâ€™accueil
2. Le lecteur tape sa recherche dans la barre
3. Le lecteur filtre sur sa recherche
4. Le lecteur scroll (ne peut pas le simuler sur lâ€™ecoindex)
5. Le lecteur clique sur une histoire
### ScÃ©nario 3 : Ã‰crire une histoire
1. Lâ€™auteur se connecte
2. Lâ€™auteur va sur la page dâ€™Ã©criture
3. Lâ€™auteur remplit son chapitre
4. Lâ€™auteur publit son histoire
### ScÃ©nario 4 : Ã‰criture dâ€™un commentaire
1. Lâ€™auteur se connecte
2. Lâ€™auteur consulte une de ses histoire favorite
3. Lâ€™auteur laisse un jâ€™aime
4. Lâ€™auteur publie un commentaire

## RÃ©sultats des scÃ©nario sur les impacts environnemental avec GreenIT

L'EcoIndex d'une page (de A Ã  G) est calculÃ© en fonction du positionnement de cette page parmi les pages mondiales concernant (voir sources) :

Nous avons choisi de comparer l'impact des scÃ©narios sur les services de lecture et Ã©criture en ligne. Nous avons choisi de faire une moyenne selon nos observations des mesures sur la classe finale, en prenant principalement en compte ce qui va Ãªtre le plus utilisÃ© (la lecture d'un chapitre)

| **Service** | **Score sur 100** | **Classe** | **DÃ©tails des mesures**             |
|-------------|-------------------|------------|-------------------------------------|
| Wattpad     | ~20                | ~F          | [...](benchmark/Wattpad/wattpad.md) |
| AO3         | ~60                | ~C          | [...](benchmark/AO3/ao3.md)         |
| Atelier des auteurs| ~40         | ~D 		 | [...](atelierdauteur.md)            

__Tab.1__: Mesure de l'Ã©coindex moyen des services de lecture et Ã©criture en ligne


## ModÃ¨le Ã©conomique
Ã‰criture et lecture en ligne : oligopole~concurrence / des produits diffÃ©renciÃ©s  (on ne retrouve pas les mÃªme oeuvre sur les mÃªme plateforme) mais homogÃ¨nes au niveaux des services
On peut soit:
- se diffÃ©rencier avec notre esprit â€œsobreâ€ sur la concurrence et instaurer de la qualitÃ© Ã  travers des services, mais il faut trouver plus de fond
- Proposer des changements Wattpad pour quâ€™ils rÃ©duisent leur consommation donc quâ€™ils deviennent plus sobre ou de les convaincre dâ€™avoir un service pour lâ€™environnement au sein de leur entreprise â® amÃ©liorer la qualitÃ© ? / vente de formations ? / ajout de donations ?
- Autre pratique de publicitÃ©s qui ne se base pas sur les donnÃ©es des utilisateurs mais les tag dâ€™une histoire pour savoir sur quoi sâ€™intÃ©resse une personne â® des publicitÃ©s Ã  gÃ©nÃ©rer que sur des tags bien prÃ©cis / plus facile de les choisir

Masse salariale simplifiÃ©e â® montant unitaire â® quantitÃ© nÃ©cessaire pour financer un salaire
Salaire mÃ©dian 3569â‚¬

â® ateliers des auteurs / formation vendu Ã  180â‚¬ / ans â‡’  ~238 formations vendu pour un salaire
â® Ao3 campagne de don 2024 / https://archive.transformativeworks.org/admin_posts/30235 : 214 698,86 US$ par 6 955 personnes dans 81 pays diffÃ©rents â‡’ ~0,2 de la somme par mois de donation pour un salaire â‡’ 5 personnes
â® Wattpad : 
	abonnement premium / qualitÃ© donnÃ©e par les Ã©diteurs dans le premium gratuite Ã  lire par mois / fonctionnalitÃ©s supplÃ©mentaire dans lâ€™abonnement â‡’ ~6â‚¬ par mois 
	/ wattpad coins (token)  / si lâ€™histoire est finie depuis longtemps, payÃ© pour la lire / 
    / publicitÃ©s et tracking lâ€™auteur la rend payante, en ayant un contrat avec comission sur la plateforme
    / PublicitÃ© pour lâ€™auteur Ã  rajoutÃ© sur ces livres â‡’ 
    / token / wattpadcoins

PublicitÃ© par les tags â® moins de ciblage sur la personne mais sur les tags dâ€™une histoire, avec une Ã©quipe intÃ©grÃ©e pour les publicitÃ©s (quâ€™ils aient le choix sur les publicitÃ©s)
â® leur demander dâ€™amÃ©liorer leur recherches
â® Faire de la formation dâ€™Ã©criture â® des ateliers avec des auteurs agrÃ©ger sur wattpad ayant dÃ©jÃ  un contrat avec eux
â® Un systÃ¨mes de donations ? difficile vu que ce sont des jeunes sur la plateformes
â® Plusieurs types de warning et tags comme Ao3 â® plus un problÃ¨me dâ€™Ã©thique que dâ€™environnement
â® Subvention pour la culture et les livres
â® crowdfounding â® pour lâ€™auteur pour continue Ã  Ã©crire â® une partie qui est redonnÃ©e Ã  la plateforme â® si aucune publication de chapitre aprÃ¨s un certain temps (parce que pas de don, ou autre) pendant trop de temps â†’ histoire dÃ©clarÃ©e tenue en otage donc plus la possibilitÃ© dâ€™utiliser ce moyen de financement jusquâ€™Ã  retrouver un rythme de publication correcte

## Maquette de l'interface et Ã©chantillon de donnÃ©es

Les ressources Web possÃ©dant une reprÃ©sentation sur notre application seront de quatre types :
- La page principale comporant la liste des oeuvres et un moyen de faire une recherche dans cette liste (ayant pour chemin `/`)
- La page d'une oeuvre (ayant pour chemin `/work/{work_id}`)
- La page de profile d'un auteur (ayant pour chemin `/author/{author_id}`)
- La page d'un chapitre d'une oeuvre (ayant pour chemin `/work/{}`)

![Maquette des quatre types de page](./benchmark/GL03_Maquettes.png)
__Fig.1__: Maquette de l'interface du prototype

Pour des raisons de respect des droits d'auteurs, nous utilisons des donnÃ©es gÃ©nÃ©rÃ©es (avec [`dummy-json`](https://dummyjson.com)).
Bien que fictives, ces donnÃ©es correspondent Ã  la structure des services concurrents : les articles comportent un titre possiblement long, un auteur et une rubrique (voir [modÃ¨le de donnÃ©es](https://github.com/UTT-GL03/Wattpad/blob/main/frontend/src/assets/sample_data.hbs)). 

## ImplÃ©mentation du scÃ©nario prioritaire

### Ã‰tape de prototypage : DonnÃ©es chargÃ©es de maniÃ¨re statique

Pour cette premiÃ¨re version du prototype (`v1.1.0`) :

- l'Ã©chantillon de donnÃ©es est encore chargÃ© dans le code de maniÃ¨re statique,
- les fonctionnalitÃ©s implÃ©mentÃ©es ne sont que celles nÃ©cessaires pour suivre le scÃ©nario prioritaire ("Lire une oeuvre").

Ce scÃ©nario nÃ©cessite de pouvoir naviguer entre trois types de page : la page des titres, les pages des oeuvres et les pages des chapitres.

### Page des titres

Nous avons dÃ©veloppÃ© les page des titres, des oeuvres et des chapitres (cf. Fig.2, Fig.3 et Fig.4) pour qu'elles affichent les Ã©chantillons de donnÃ©es sous une forme proche de ce que prÃ©voyait la maquette.

![Prototype de la page des titres](./benchmark/Screenshot_Page_Titres.png)
__Fig.2__: Prototype de la page des titres.

![Prototype de la page d'oeuvre](./benchmark/Screenshot_Page_Oeuvre.png)
__Fig.2__: Prototype de la page d'oeuvre.

![Prototype de la page de chapitre](./benchmark/Screenshot_Page_Chapitre.png)
__Fig.2__: Prototype de la page de chapitre.

Pour l'instant, nous avons choisi un *framework* de mise en page minimaliste ([*PicoCSS*](https://picocss.com)).
Dans la suite du projet, nous verrons si l'impact environnemental du passage Ã  un *framework* de mise en page plus puissant (comme [*Bootstrap*](https://getbootstrap.com)) est acceptable.

Dans l'Ã©tat actuel du prototype, il est possible d'avoir une premiÃ¨re idÃ©e de l'impact environnemental du *frontend*.
Bien entendu, il manque encore le chargement dynamique des donnÃ©es, mais nous pouvons dÃ©jÃ  Ã©valuer l'impact de l'affichage des donnÃ©es et du *framework* (Tab.2).

|   | EcoIndex| GES (gCO2e) | Taille du DOM | RequÃªtes | Taille de la page (ko)
|---|--------:|------------:|--------------:|---------:|---------------------:
| 1. Consulter les titres des oeuvres					   | 70 B ğŸŸ© | 1,59 | 200 | 27 | 6799
| 2. Ouvrir une oeuvre 			   | 92 A ğŸŸ¦ | 1,15 |  51 | 19 | 4
| 3. Ouvrir un chapitre	| 93 A ğŸŸ¦ | 1,14 | 37 | 19 | 4
| 4. Retourner a la page de l'oeuvre 		| 92 A ğŸŸ¦ |  1,15|  51 | 19 | 4
| 5. Ouvrir un autre chapitre 		| 93 A ğŸŸ¦ |  1,14|  37 | 19 | 4

__Tab.2__: Ã‰valuation de l'impact du scÃ©nario "Lire une oeuvre" dans le prototype v1.1.0. 

Ces estimations bien qu'artificiellement basses (puisque les donnÃ©es sont chargÃ©es de maniÃ¨re statique) sont tout de mÃªme Ã  comparer avec celles des services concurrents (Tab.1) vues prÃ©cÃ©demment.

Si nous arrivons Ã  maintenir les Ã©missions en dessous de 1,5 g par page pour notre produit minimum viable, nous pouvons donc espÃ©rer proposer une alternative moins impactante que AO3 et jusqu'Ã  deux fois moins impactante que Wattpad.

### Ã‰tape de prototypage : DonnÃ©es statiques chargÃ©es de maniÃ¨re dynamique

Pour cette nouvelle version du prototype (`v1.2.0`), les donnÃ©es (toujours statiques) sont dÃ©sormais chargÃ©es par le *frontend* Ã  travers le rÃ©seau immÃ©diatement aprÃ¨s un premier affichage Ã  vide.
Ce comportement, plus rÃ©aliste, n'a pour effet qu'une requÃªte supplÃ©mentaire par page affichÃ©e. 

Concernant l'Ã©valuation de l'impact environnemental du scÃ©nario, par rapport au tableau prÃ©cÃ©dent (cf. Tab.2), on remarque que l'Ã©coindex est l"=Ã©gÃ¨rement plus bas partout sauf pour le premier chargement de page. Ce qu'on gagne en ne chanargeant pas les donnÃ©es directement au chargement de la page, on le perd en les chargeant au fur et Ã  mesure.
|   | EcoIndex| GES (gCO2e) | Taille du DOM | RequÃªtes | Taille de la page (ko)
|---|--------:|------------:|--------------:|---------:|---------------------:
| 1. Consulter les titres des oeuvres					   | 89 A ğŸŸ¦ | 1,22 | 16 | 3 | 497,57
| 2. Ouvrir une oeuvre 			   | 83 A ğŸŸ¦ | 1,34 |  46 | 1 | 1543,388
| 3. Ouvrir un chapitre	| 84 A ğŸŸ¦ | 1,32 | 36 | 1 | 1543,388
| 4. Passer au chapitre suivant 		| 93 A ğŸŸ¦ |  1,14|  38 | 0 | 0

__Tab.3__: Ã‰valuation de l'impact du scÃ©nario "Lire une oeuvre" dans le prototype v1.2.0. 

## Mesures de la consommation Ã©nergÃ©tique lors du passage Ã  l'Ã©chelle

Maintenant que notre prototype est rÃ©aliste en termes de nombre de requÃªtes, nous pouvons simuler les effets du "passage Ã  l'Ã©chelle". 

Dans notre cas, l'augmentation de la quantitÃ© des donnÃ©es Ã  traiter viendra de l'augmentation du nombre d'utilisateurs, qu'ils soient auteurs ou non (puisqu'il faut gÃ©rer leur compte), du nombre d'oeuvres archivÃ©es, ainsi que de  la quantitÃ© de commentaires.
La gestion de ces donnÃ©es, bien que coÃ»teuse du point de vue environnemental nous semble contribuer grandement Ã  l'utilitÃ© sociale de la plateforme, que cela soit sur l'aspect d'archivage d'oeuvres ou l'aspect communautaire des interactions entre auteurs et lecteurs.
Par consÃ©quent notre projet continuera de gÃ©rer ces donnÃ©es.

Nous avons mis 100 auteurs et entre 100 et 200 oeuvres pour le passage Ã  l'Ã©chelle.

### Ã‰volution de l'EcoIndex lors du passage Ã  l'Ã©chelle

Produites dÃ©sormais de maniÃ¨re automatique lors de l'intÃ©gration continue, les mesures nÃ©cessaires Ã  la production de l'EcoIndex, [avant](https://github.com/UTT-GL03/QVOTIDIE/actions/runs/19211909192/artifacts/4512754147) et [aprÃ¨s](https://github.com/UTT-GL03/QVOTIDIE/actions/runs/19224015758/artifacts/4516341581) la simulation du passage Ã  l'Ã©chelle retraduisent bien (cf. Tab.6) l'augmentation du poids des tÃ©lÃ©chargements, mais aussi de l'augmentation du nombre d'Ã©lÃ©ments de la page des titres.

|   | EcoIndex| GES (gCO2e) | Taille du DOM | RequÃªtes | Taille de la page (ko)
|---|--------:|------------:|--------------:|---------:|---------------------:
| 1. Consulter les titres des oeuvres 					   | <del>89 A ğŸŸ¦</del><br/>35 E ğŸŸ¥ | <del>1,22</del><br/>2,3 | <del>16</del><br/>1468 | <del>3</del><br/>5 | <del>497,57</del><br/>10280,453
| 2. Ouvrir une oeuvre 			   | <del>83 A ğŸŸ¦</del><br/>75 B ğŸŸ© | <del>1,34</del><br/>1,5 | <del>46</del><br/>60 | 1 | <del>1543,388</del><br/>9781,171
| 3. Ouvrir un chapitre	| <del>84 A ğŸŸ¦</del><br/>76 A ğŸŸ¦ | <del>1,32</del><br/>1,48 | <del>36</del><br/>45 | 1 | <del>1543,388</del><br/>	9781,171
| 4. Passer au chapitre suivant 		| 93 A ğŸŸ¦ |  1,14 | <del>38</del><br/>47 | 0 | 0

__Tab.4__: Effet du passage Ã  l'Ã©chelle sur l'impact du scÃ©nario "Lire une oeuvre" dans le prototype v1.2.1.

On pourrait s'Ã©tonner que la baisse de l'EcoIndex soit beaucoup plus forte pour la page des titres que pour la page d'un article alors que l'augmentation du poids des tÃ©lÃ©chargements est analogue.
Ceci s'explique par le fait que l'EcoIndex vise Ã  Ã©valuer un impact global, incluant une part de la fabrication et de la fin de vie des terminaux, et que cette part augmente avec le nombre d'Ã©lÃ©ments de la page.
Pour Ã©valuer plus prÃ©cisÃ©ment l'impact de la consultation elle-mÃªme nous utiliserons un autre outil de mesure : GreenFrame.

### Mesure de la consommation Ã©nergÃ©tique liÃ©e Ã  la consultation

Le logiciel GreenFrame est capable d'estimer, pour les diffÃ©rents composants de l'architecture, la consommation Ã©nergÃ©tique :

- du CPU (Ã  partir du temps de calcul),
- de la mÃ©moire vive (Ã  partir de la taille des donnÃ©es mÃ©morisÃ©es),
- du disque (Ã  partir de la taille des donnÃ©es lues et Ã©crites),
- du rÃ©seau (Ã  partir de la taille des donnÃ©es reÃ§ues et envoyÃ©es),
- pour le navigateur uniquement, de l'Ã©cran (Ã  partir du temps d'exÃ©cution du scÃ©nario).


 (a)                 | cpu (Wh)   | mem (Wh)   | disk (Wh) | network (Wh)       | screen (Wh) | total (Wh)   |
| ------------------ | ---------- | ---------- | --------- | ------------------ | ----------- | ------------ | 
| Navigateur         | 0.0027     | 0.000058   | 0.0       | <mark>0.062</mark> | <mark>0.069</mark> | 0.13  |
| Serveur Web        | 0.000061   | 0.000020   | 0.0       | <mark>0.063</mark> | 0.0                | 0.063 |

â”‚ (Consulter les titres d'oeuvres)                  â”‚ cpu (Wh)   â”‚ mem (Wh)    â”‚ disk (Wh) â”‚ network (Wh) â”‚ screen (Wh) â”‚ total (Wh) 
| ------------------ | ----------: | ----------: | ---------: | ------------------: | -----------: | ------------: 
| Navigateur         | '0.022'    â”‚ '0.00011'   â”‚ '0.0'     â”‚ <mark>'0.057'</mark>      â”‚ '0.11'      â”‚ '0.19'     
| Serveur Web        | '0.000015' â”‚ '0.0000046' â”‚ '0.0'     â”‚ <mark>'0.057'</mark>      â”‚ '0.0'       â”‚ '0.057'    

â”‚ (Consulter une oeuvre)                  â”‚ cpu (Wh)   â”‚ mem (Wh)    â”‚ disk (Wh) â”‚ network (Wh) â”‚ screen (Wh) â”‚ total (Wh) 
| ------------------ | ----------: | ----------: | ---------: | ------------------: | -----------: | ------------: 
| Navigateur         | '0.0014'   â”‚ '0.000062'  â”‚ '0.0'     â”‚ <mark>'0.057'</mark>      â”‚ '0.068'     â”‚ '0.13'     
| Serveur Web        | '0.000015' â”‚ '0.0000029' â”‚ '0.0'     â”‚ <mark>'0.057'</mark>      â”‚ '0.0'       â”‚ '0.057'   

â”‚ (Consulter un chapitre)                  â”‚ cpu (Wh)   â”‚ mem (Wh)    â”‚ disk (Wh) â”‚ network (Wh) â”‚ screen (Wh) â”‚ total (Wh) 
| ------------------ | ----------: | ----------: | ---------: | ------------------: | -----------: | ------------: 
| Navigateur         | '0.0016'   â”‚ '0.000062'  â”‚ '0.0'     â”‚ <mark>'0.057'</mark>      â”‚ '0.069'     â”‚ '0.13'     
| Serveur Web        | '0.000014' â”‚ '0.0000029' â”‚ '0.0'     â”‚ <mark>'0.057'</mark>      â”‚ '0.0'       â”‚ '0.057'    

__Tab.5__: Estimation de la consommation Ã©nergÃ©tique de la consultation de chaque type de page.

Par rapport Ã  ce que pouvait laisser penser l'EcoIndex, les rÃ©sultats (cf. Tab.5) indiquent que la consommation due Ã  la consultation de l'index (avec ses 200 titres) est Ã©quivalente Ã  celle d'un chapitre. Autrement dit, l'affichage en lui mÃªme de ces donnÃ©es en grand nombre est nÃ©gligeable par rapport Ã  la transmission de ces donnÃ©es sur le rÃ©seau.

Par contre, l'affichage de ces donnÃ©es a bien un impact indirect : en augmentant le temps de lecture, il a un effet dÃ©terminant sur le temps d'Ã©clairage de l'Ã©cran. 
De fait, les trois Ã©lÃ©ments ayant le plus d'impact (Ã  peu prÃ¨s Ã  Ã©galitÃ©, le reste Ã©tant nÃ©gligeable), sont ici : 

- l'Ã©cran du client,
- le rÃ©seau du client,
- le rÃ©seau du serveur.

### Effet de l'introduction d'une base de donnÃ©es

Afin de rÃ©duire l'impact Ã©nÃ©rgÃ©tique du rÃ©seau, nous stockons dÃ©sormais les donnÃ©es de l'application (`v2.0.0`) dans une base de donnÃ©es (*CouchDB*).
Cette Ã©volution nous permet, lors de l'affichage d'une oeuvre, de charger une seule oeuvre plutÃ´t que 200.


## Sources statistiques
- https://expandedramblings.com/index.php/wattpad-statistics-facts/
- https://ao3demographicssurvey2024.tumblr.com/post/768677035317018624/the-ao3-demographics-survey-2024-was-an-unofficial
- https://www.researchgate.net/figure/equipements-utilises-par-les-lecteurs-pour-la-lecture-numerique-selon-lappartenance_fig3_364294529
- https://www.journaldunet.com/publishers/1187389-marche-lecture-numerique-statista/
